# 最小限のpytest設定（WSLクラッシュ対策用）
# メモリ使用を抑えた軽量な設定

[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# 最小限のオプション（並列実行なし、カバレッジなし）
addopts =
    -v
    --tb=short
    --strict-markers
    # エラーでも全テストを継続実行
    # --maxfail を削除して全テスト実行
    # -x オプションで最初の失敗で停止（原因特定用）
    # カバレッジを無効化してメモリを節約
    # --cov を削除
    # 並列実行を無効化してリソースを節約
    # -n を削除

minversion = 8.0
asyncio_mode = auto
timeout = 300
timeout_method = thread

# ログ設定
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# ファイルログ
log_file = test_logs/pytest_minimal.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(name)s:%(lineno)d - %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

markers =
    slow: 実行時間が長いテスト
    integration: 統合テスト
    performance: パフォーマンステスト
    ci: CI/CD関連テスト
    unit: ユニットテスト
    ai: AI機能関連テスト

filterwarnings =
    default
    # エラーになりやすい警告を表示
